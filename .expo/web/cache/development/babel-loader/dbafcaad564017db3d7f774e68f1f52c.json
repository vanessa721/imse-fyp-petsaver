{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { Button, Text, Input, Avatar } from 'react-native-elements';\nimport * as ImagePicker from 'expo-image-picker';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { storage, db, auth } from \"../firebase\";\nimport { ref as storage_ref, getDownloadURL, uploadBytes } from \"firebase/storage\";\nimport { onSnapshot, doc, updateDoc } from \"firebase/firestore\";\nimport Dropdown from \"../components/dropdown\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar assetsObject = require(\"../assets/asset.tsx\");\n\nexport default function UserSettingScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      imagepath = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userId = _useState4[0],\n      setUserId = _useState4[1];\n\n  var _useState5 = useState(\"Male\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      UserGender = _useState6[0],\n      setGenderValue = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      UserName = _useState8[0],\n      setUserName = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      UserAge = _useState10[0],\n      setUserAge = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      UserDescription = _useState12[0],\n      setUserDescription = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      uploading = _useState14[0],\n      setUploading = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      submitted = _useState16[0],\n      setSubmitted = _useState16[1];\n\n  var _useState17 = useState(2),\n      _useState18 = _slicedToArray(_useState17, 2),\n      selectedButtonIndex = _useState18[0],\n      setSelectedButtonIndex = _useState18[1];\n\n  var _useState19 = useState('Submit'),\n      _useState20 = _slicedToArray(_useState19, 2),\n      submitButtomText = _useState20[0],\n      setSubmitButtomText = _useState20[1];\n\n  var _useState21 = useState(true),\n      _useState22 = _slicedToArray(_useState21, 2),\n      isLoading = _useState22[0],\n      setIsLoading = _useState22[1];\n\n  var getData = function getData() {\n    var _auth$currentUser;\n\n    var temp_user, unsub;\n    return _regeneratorRuntime.async(function getData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log('imagepath2: ', imagepath);\n            console.log(\"Get data: userId:\", userId);\n            console.log('imagepath3: ', imagepath);\n            temp_user = auth == null ? void 0 : (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid;\n\n            if (temp_user) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\", false);\n\n          case 6:\n            unsub = onSnapshot(doc(db, \"Users\", temp_user), function (doc) {\n              var _doc$data, _doc$data2, _doc$data3, _doc$data4, _doc$data5, _doc$data6, _doc$data7, _doc$data8, _doc$data9, _doc$data10;\n\n              if (doc == undefined) return false;\n              if (!doc.data()) return false;\n              if ((_doc$data = doc.data()) != null && _doc$data.desc) setUserDescription((_doc$data2 = doc.data()) == null ? void 0 : _doc$data2.desc);\n              if ((_doc$data3 = doc.data()) != null && _doc$data3.username) setUserName((_doc$data4 = doc.data()) == null ? void 0 : _doc$data4.username);\n              if ((_doc$data5 = doc.data()) != null && _doc$data5.usergender) setGenderValue((_doc$data6 = doc.data()) == null ? void 0 : _doc$data6.usergender);\n              if ((_doc$data7 = doc.data()) != null && _doc$data7.userAge) setUserAge((_doc$data8 = doc.data()) == null ? void 0 : _doc$data8.userAge);\n              if ((_doc$data9 = doc.data()) != null && _doc$data9.imagepath) setImage((_doc$data10 = doc.data()) == null ? void 0 : _doc$data10.imagepath);\n              console.log('imagepath4: ', imagepath);\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    console.log('imagepath1: ', imagepath);\n    console.log('imagepath1: ', imagepath);\n    console.log('imagepath1: ', imagepath);\n    console.log('imagepath1: ', imagepath);\n  }, []);\n\n  var pickImageByLibrary = function pickImageByLibrary() {\n    var result;\n    return _regeneratorRuntime.async(function pickImageByLibrary$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 4],\n              maxWidth: 500,\n              maxHeight: 500,\n              quality: 0.5\n            }));\n\n          case 2:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var pickImageByCamera = function pickImageByCamera() {\n    var result;\n    return _regeneratorRuntime.async(function pickImageByCamera$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchCameraAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 4],\n              quality: 0.5\n            }));\n\n          case 2:\n            result = _context3.sent;\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n            }\n\n            console.log(Platform.OS);\n\n          case 5:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var uploadPost = function uploadPost() {\n    var snapshotDownloadURL, imagename, storageRef, blob, snapshot, UserRef;\n    return _regeneratorRuntime.async(function uploadPost$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            setUploading(true);\n            console.log('user uploading image ', userId);\n            snapshotDownloadURL = null;\n\n            if (!imagepath) {\n              _context4.next = 19;\n              break;\n            }\n\n            imagename = Date.now() + '-' + getRandomString(5) + '-' + userId;\n            storageRef = storage_ref(storage, 'userIcon/' + imagename + '.png');\n            _context4.next = 8;\n            return _regeneratorRuntime.awrap(new Promise(function (resolve, reject) {\n              var xhr = new XMLHttpRequest();\n\n              xhr.onload = function () {\n                resolve(xhr.response);\n              };\n\n              xhr.onerror = function () {\n                reject(new TypeError(\"Network request failed\"));\n              };\n\n              xhr.responseType = \"blob\";\n              xhr.open(\"GET\", imagepath, true);\n              xhr.send(null);\n            }));\n\n          case 8:\n            blob = _context4.sent;\n            _context4.next = 11;\n            return _regeneratorRuntime.awrap(uploadBytes(storageRef, blob));\n\n          case 11:\n            snapshot = _context4.sent;\n            _context4.next = 14;\n            return _regeneratorRuntime.awrap(getDownloadURL(snapshot.ref));\n\n          case 14:\n            snapshotDownloadURL = _context4.sent;\n            setImage(snapshotDownloadURL);\n            console.log('File available at', snapshotDownloadURL);\n            _context4.next = 20;\n            break;\n\n          case 19:\n            console.log('user no image ', userId);\n\n          case 20:\n            _context4.prev = 20;\n\n            if (!userId) {\n              _context4.next = 28;\n              break;\n            }\n\n            UserRef = doc(db, 'Users', userId);\n            _context4.next = 25;\n            return _regeneratorRuntime.awrap(updateDoc(UserRef, {\n              imagepath: snapshotDownloadURL,\n              username: UserName,\n              usergender: UserGender,\n              desc: UserDescription,\n              lastupdateDate: new Date(),\n              userAge: UserAge\n            }));\n\n          case 25:\n            console.log(\"Document written with ID: \", UserRef.id);\n            _context4.next = 29;\n            break;\n\n          case 28:\n            console.error(\"userId not found:  \");\n\n          case 29:\n            _context4.next = 34;\n            break;\n\n          case 31:\n            _context4.prev = 31;\n            _context4.t0 = _context4[\"catch\"](20);\n            console.error(\"Error adding document:  \", _context4.t0);\n\n          case 34:\n            setSubmitted(true);\n            setUploading(false);\n            setSubmitButtomText(\"Submitted\");\n\n          case 37:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[20, 31]], Promise);\n  };\n\n  return _jsx(_Fragment, {\n    children: _jsx(View, {\n      style: styles.container,\n      children: _jsxs(ScrollView, {\n        showsVerticalScrollIndicator: false,\n        showsHorizontalScrollIndicator: false,\n        style: {\n          height: \"100%\",\n          width: \"100%\",\n          paddingTop: 15\n        },\n        children: [_jsxs(View, {\n          style: styles.imagePickerContainer,\n          children: [_jsx(View, {\n            style: styles.imageitem,\n            children: imagepath != \"\" ? _jsx(TouchableOpacity, {\n              onPress: pickImageByLibrary,\n              children: _jsx(Avatar, {\n                size: 100,\n                rounded: true,\n                title: \"U..\",\n                source: {\n                  uri: imagepath\n                }\n              })\n            }) : _jsx(TouchableOpacity, {\n              onPress: pickImageByLibrary,\n              children: _jsx(Avatar, {\n                size: 100,\n                rounded: true,\n                title: \"U\",\n                activeOpacity: 0.7,\n                containerStyle: {\n                  backgroundColor: '#aaaaaa'\n                }\n              })\n            })\n          }), _jsx(View, {\n            style: styles.iconContainer,\n            children: _jsx(FontAwesome, {\n              name: \"camera\",\n              size: 25,\n              rounded: true,\n              color: \"black\",\n              iconStyle: {\n                backgroundColor: '#eb1561'\n              },\n              containerStyle: {\n                backgroundColor: '#eb1561'\n              },\n              avatarStyle: {\n                backgroundColor: '#eb1561'\n              },\n              overlayContainerStyle: {\n                backgroundColor: '#eb1561'\n              },\n              placeholderStyle: {\n                backgroundColor: '#eb1561'\n              },\n              onPress: function onPress() {\n                pickImageByLibrary;\n              }\n            })\n          })]\n        }), _jsx(Input, {\n          style: styles.input,\n          placeholder: \"Charlie\",\n          label: \"User Name:\",\n          onChangeText: function onChangeText(text) {\n            return setUserName(text);\n          },\n          containerStyle: {\n            marginBottom: 20\n          },\n          value: UserName\n        }), _jsx(Input, {\n          style: styles.input,\n          placeholder: \"0-100\",\n          label: \"User Age:\",\n          onChangeText: function onChangeText(text) {\n            return setUserAge(text);\n          },\n          containerStyle: {\n            marginBottom: 20\n          },\n          value: UserAge\n        }), _jsx(Input, {\n          style: styles.input,\n          placeholder: \"Descript your User here\",\n          label: \"User Description:\",\n          onChangeText: function onChangeText(text) {\n            return setUserDescription(text);\n          },\n          containerStyle: {\n            marginBottom: 20\n          },\n          value: UserDescription\n        }), _jsxs(View, {\n          style: styles.pickerContainer,\n          children: [_jsx(Text, {\n            style: styles.pickerLabel,\n            children: \"User Gender:\"\n          }), _jsx(Dropdown, {\n            data: gender_drop_down_data,\n            initvalue: UserGender\n          })]\n        }), _jsx(Button, {\n          title: submitButtomText,\n          onPress: uploadPost,\n          loading: uploading,\n          disabled: submitted,\n          buttonStyle: {\n            backgroundColor: 'rgba(111, 202, 186, 1)',\n            borderRadius: 5,\n            margin: 10,\n            marginTop: 30\n          },\n          titleStyle: {\n            fontSize: 12\n          }\n        })]\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'flex-start',\n    justifyContent: 'flex-start',\n    padding: 20,\n    backgroundColor: 'white',\n    height: \"100%\"\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold'\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%'\n  },\n  input: {\n    fontSize: 12\n  },\n  pickerContainer: {\n    paddingHorizontal: 10,\n    marginBottom: 30\n  },\n  pickerLabel: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: 'rgb(134, 147, 158)'\n  },\n  CardContainer: {\n    width: '100%',\n    flex: 1,\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    alignItems: 'flex-start',\n    borderRadius: 25,\n    padding: 10,\n    borderWidth: 1,\n    borderColor: '#dddddd',\n    marginVertical: 15\n  },\n  imageitem: {\n    aspectRatio: 0.95,\n    borderRadius: 25,\n    fontSize: 12\n  },\n  contentContainer: {\n    width: '50%',\n    height: '100%',\n    paddingLeft: 10,\n    flex: 1\n  },\n  Username: {\n    fontWeight: 'bold',\n    fontSize: 20\n  },\n  Usergender: {\n    fontSize: 10,\n    marginBottom: 12,\n    fontWeight: 'bold',\n    color: '#888888'\n  },\n  desc: {\n    fontSize: 10,\n    color: '#999999'\n  },\n  askbutton: {\n    backgroundColor: '#0b9298',\n    borderRadius: 5,\n    paddingHorizontal: 15\n  },\n  askbuttonContainer: {\n    position: 'absolute',\n    left: 10,\n    bottom: 0\n  },\n  imagePickerContainer: {\n    flexDirection: 'column',\n    paddingHorizontal: 10,\n    alignItems: 'center',\n    alignSelf: 'center',\n    width: 'fit-content'\n  },\n  paddingView: {\n    paddingTop: 10\n  },\n  iconContainer: {\n    position: 'absolute',\n    zIndex: 1,\n    right: 10,\n    bottom: 0\n  }\n});\nvar gender_drop_down_data = [{\n  label: 'Male',\n  value: 'male'\n}, {\n  label: 'Female',\n  value: 'female'\n}];\n\nfunction getRandomString(length) {\n  var randomChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  var result = '';\n\n  for (var i = 0; i < length; i++) {\n    result += randomChars.charAt(Math.floor(Math.random() * randomChars.length));\n  }\n\n  return result;\n}","map":{"version":3,"sources":["C:/Users/ZZ00UI738/Documents/van fyp/petsaver/screens/UserSettingScreen.tsx"],"names":["React","useEffect","useState","Button","Text","Input","Avatar","ImagePicker","FontAwesome","storage","db","auth","ref","storage_ref","getDownloadURL","uploadBytes","onSnapshot","doc","updateDoc","Dropdown","assetsObject","require","UserSettingScreen","navigation","imagepath","setImage","userId","setUserId","UserGender","setGenderValue","UserName","setUserName","UserAge","setUserAge","UserDescription","setUserDescription","uploading","setUploading","submitted","setSubmitted","selectedButtonIndex","setSelectedButtonIndex","submitButtomText","setSubmitButtomText","isLoading","setIsLoading","getData","console","log","temp_user","currentUser","uid","unsub","undefined","data","desc","username","usergender","userAge","pickImageByLibrary","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","maxWidth","maxHeight","quality","result","cancelled","uri","pickImageByCamera","launchCameraAsync","Platform","OS","uploadPost","snapshotDownloadURL","imagename","Date","now","getRandomString","storageRef","Promise","resolve","reject","xhr","XMLHttpRequest","onload","response","onerror","TypeError","responseType","open","send","blob","snapshot","UserRef","lastupdateDate","id","error","styles","container","height","width","paddingTop","imagePickerContainer","imageitem","backgroundColor","iconContainer","input","text","marginBottom","pickerContainer","pickerLabel","gender_drop_down_data","borderRadius","margin","marginTop","fontSize","StyleSheet","create","flex","alignItems","justifyContent","padding","title","fontWeight","separator","marginVertical","paddingHorizontal","color","CardContainer","flexDirection","flexWrap","borderWidth","borderColor","aspectRatio","contentContainer","paddingLeft","Username","Usergender","askbutton","askbuttonContainer","position","left","bottom","alignSelf","paddingView","zIndex","right","label","value","length","randomChars","i","charAt","Math","floor","random"],"mappings":"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","sourcesContent":["\nimport React, { useEffect, useState, useContext } from 'react';\nimport { StyleSheet, View, Image, TouchableOpacity, ScrollView, Platform } from 'react-native';\nimport { Button, ButtonGroup, withTheme, Text, Input, Divider, Avatar } from 'react-native-elements';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as FileSystem from 'expo-file-system';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { storage, db, auth } from \"../firebase\";\nimport { ref as storage_ref, getDownloadURL, uploadBytes } from \"firebase/storage\";\nimport { collection, query, where, onSnapshot, doc, updateDoc } from \"firebase/firestore\";\n\nimport { SettingStackProps } from '../types';\nimport Dropdown from '../components/dropdown'\nconst assetsObject = require('../assets/asset.tsx')\n\nexport default function UserSettingScreen({ navigation }: SettingStackProps<'Setting'>) {\n  const [imagepath, setImage] = useState<string | undefined>('');\n  const [userId, setUserId] = useState<string | undefined>('');\n  const [UserGender, setGenderValue] = useState<string | undefined>(\"Male\");\n  const [UserName, setUserName] = useState<string | undefined>('');\n  const [UserAge, setUserAge] = useState<string | undefined>('');\n  const [UserDescription, setUserDescription] = useState<string | undefined>('');\n  const [uploading, setUploading] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [selectedButtonIndex, setSelectedButtonIndex] = useState(2);\n  const [submitButtomText, setSubmitButtomText] = useState('Submit');\n  const [isLoading, setIsLoading] = useState(true);\n\n\n  const getData = async () => {\n\n    console.log('imagepath2: ', imagepath);\n    console.log(\"Get data: userId:\", userId);\n    console.log('imagepath3: ', imagepath);\n    var temp_user = auth?.currentUser?.uid\n    if (!temp_user) return false;\n    const unsub = onSnapshot(doc(db, \"Users\", temp_user), (doc) => {\n      if (doc == undefined) return false;\n      if (!doc.data()) return false;\n\n      if (doc.data()?.desc) setUserDescription(doc.data()?.desc);\n      if (doc.data()?.username) setUserName(doc.data()?.username);\n      if (doc.data()?.usergender) setGenderValue(doc.data()?.usergender);\n      if (doc.data()?.userAge) setUserAge(doc.data()?.userAge);\n      if (doc.data()?.imagepath) setImage(doc.data()?.imagepath);\n      console.log('imagepath4: ', imagepath);\n    });\n  }\n\n  useEffect(() => {\n    console.log('imagepath1: ', imagepath);\n    console.log('imagepath1: ', imagepath);\n    console.log('imagepath1: ', imagepath);\n    console.log('imagepath1: ', imagepath);\n    // setUserId(auth?.currentUser?.uid);\n    // console.log('imagepath1: ', imagepath);\n    // getData();\n    // setIsLoading(false);\n    // console.log('imagepath: ', imagepath);\n\n  }, []);\n\n  const pickImageByLibrary = async () => {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: [4, 4],\n      maxWidth: 500,\n      maxHeight: 500,\n      quality: 0.5,\n    });\n    if (!result.cancelled) {\n      setImage(result.uri);\n    }\n\n  };\n\n  const pickImageByCamera = async () => {\n    let result = await ImagePicker.launchCameraAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: [4, 4],\n      quality: 0.5,\n    });\n    if (!result.cancelled) {\n      setImage(result.uri);\n    }\n    console.log(Platform.OS)\n  };\n\n  const uploadPost = async () => {\n    setUploading(true)\n\n    console.log('user uploading image ', userId);\n\n    //Set Image\n    var snapshotDownloadURL = null\n    if (imagepath) {\n      const imagename = Date.now() + '-' + getRandomString(5) + '-' + userId\n      const storageRef = storage_ref(storage, 'userIcon/' + imagename + '.png');\n\n      const blob: Blob = await new Promise((resolve, reject) => {\n        const xhr = new XMLHttpRequest();\n        xhr.onload = function () {\n          resolve(xhr.response);\n        };\n        xhr.onerror = function () {\n          reject(new TypeError(\"Network request failed\"));\n        };\n        xhr.responseType = \"blob\";\n        xhr.open(\"GET\", imagepath, true);\n        xhr.send(null);\n      });\n      const snapshot = await uploadBytes(storageRef, blob);\n      snapshotDownloadURL = await getDownloadURL(snapshot.ref);\n      setImage(snapshotDownloadURL);\n      console.log('File available at', snapshotDownloadURL);\n    } else {\n      console.log('user no image ', userId);\n    }\n\n    //Set User Doc\n    try {\n      if (userId) {\n        const UserRef = doc(db, 'Users', userId);\n        await updateDoc(UserRef, {\n          imagepath: snapshotDownloadURL,\n          username: UserName,\n          usergender: UserGender,\n          desc: UserDescription,\n          lastupdateDate: new Date(),\n          userAge: UserAge\n        });\n        console.log(\"Document written with ID: \", UserRef.id);\n      } else {\n        console.error(\"userId not found:  \");\n      }\n    } catch (e) {\n      console.error(\"Error adding document:  \", e);\n    }\n\n    setSubmitted(true)\n    setUploading(false)\n    setSubmitButtomText(\"Submitted\")\n  }\n\n  return (\n    <>\n      <View style={styles.container}>\n        <ScrollView showsVerticalScrollIndicator={false}\n          showsHorizontalScrollIndicator={false}\n          style={{ height: \"100%\", width: \"100%\", paddingTop: 15 }}>\n          <View style={styles.imagePickerContainer}>\n            <View style={styles.imageitem}>\n              {imagepath != \"\" ?\n                <TouchableOpacity onPress={pickImageByLibrary}>\n                  <Avatar\n                    size={100}\n                    rounded\n                    title=\"U..\"\n                    source={{ uri: imagepath }}\n                  />\n                </TouchableOpacity> :\n                <TouchableOpacity onPress={pickImageByLibrary}>\n                  <Avatar\n                    size={100}\n                    rounded\n                    title=\"U\"\n                    activeOpacity={0.7}\n                    containerStyle={{ backgroundColor: '#aaaaaa' }}\n                  />\n                </TouchableOpacity>\n\n              }\n            </View>\n            <View style={styles.iconContainer}>\n              <FontAwesome\n                name=\"camera\"\n                size={25}\n                rounded\n                color=\"black\"\n                iconStyle={{ backgroundColor: '#eb1561' }}\n                containerStyle={{ backgroundColor: '#eb1561' }}\n                avatarStyle={{ backgroundColor: '#eb1561' }}\n                overlayContainerStyle={{ backgroundColor: '#eb1561' }}\n                placeholderStyle={{ backgroundColor: '#eb1561' }}\n                onPress={() => { pickImageByLibrary }}\n              />\n            </View>\n          </View>\n\n          <Input style={styles.input} placeholder=\"Charlie\" label='User Name:'\n            onChangeText={text => setUserName(text)} containerStyle={{ marginBottom: 20 }} value={UserName} />\n          <Input style={styles.input} placeholder=\"0-100\" label='User Age:'\n            onChangeText={text => setUserAge(text)} containerStyle={{ marginBottom: 20 }} value={UserAge} />\n          <Input style={styles.input} placeholder=\"Descript your User here\" label='User Description:'\n            onChangeText={text => setUserDescription(text)} containerStyle={{ marginBottom: 20 }} value={UserDescription} />\n          <View style={styles.pickerContainer}>\n            <Text style={styles.pickerLabel} >User Gender:</Text>\n            <Dropdown data={gender_drop_down_data} initvalue={UserGender} />\n          </View>\n          <Button title={submitButtomText} onPress={uploadPost}\n            loading={uploading}\n            disabled={submitted}\n            buttonStyle={{\n              backgroundColor: 'rgba(111, 202, 186, 1)',\n              borderRadius: 5,\n              margin: 10, marginTop: 30\n            }}\n\n            titleStyle={{ fontSize: 12 }} />\n        </ScrollView>\n      </View >\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'flex-start',\n    justifyContent: 'flex-start',\n    padding: 20,\n    backgroundColor: 'white',\n    height: \"100%\"\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  input: {\n    fontSize: 12\n  },\n  pickerContainer: {\n    paddingHorizontal: 10,\n    marginBottom: 30\n\n  },\n  pickerLabel: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: 'rgb(134, 147, 158)'\n  },\n  CardContainer: {\n    width: '100%',\n    flex: 1,\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    alignItems: 'flex-start', // if you want to fill rows left to right\n    borderRadius: 25,\n    padding: 10,\n    borderWidth: 1,\n    borderColor: '#dddddd',\n    marginVertical: 15,\n  },\n  imageitem: {\n    aspectRatio: 0.95,\n    borderRadius: 25,\n    fontSize: 12,\n\n  },\n  contentContainer: {\n    width: '50%',\n    height: '100%',\n    paddingLeft: 10,\n    flex: 1,\n  },\n  Username: {\n    fontWeight: 'bold',\n    fontSize: 20\n  },\n  Usergender: {\n    fontSize: 10,\n    marginBottom: 12,\n    fontWeight: 'bold',\n    color: '#888888'\n  },\n  desc: {\n    fontSize: 10,\n    color: '#999999'\n  },\n  askbutton: {\n    backgroundColor: '#0b9298',\n    borderRadius: 5,\n    paddingHorizontal: 15\n  },\n  askbuttonContainer: {\n    position: 'absolute',\n    left: 10,\n    bottom: 0,\n  },\n  imagePickerContainer: {\n    flexDirection: 'column',\n    paddingHorizontal: 10,\n    alignItems: 'center',\n    alignSelf: 'center',\n    width: 'fit-content'\n  },\n  paddingView: {\n    paddingTop: 10\n  },\n  iconContainer: {\n    position: 'absolute',\n    zIndex: 1,\n    right: 10,\n    bottom: 0\n  },\n});\n\nconst gender_drop_down_data = [\n  { label: 'Male', value: 'male' },\n  { label: 'Female', value: 'female' }\n];\n\nfunction getRandomString(length: number) {\n  var randomChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  var result = '';\n  for (var i = 0; i < length; i++) {\n    result += randomChars.charAt(Math.floor(Math.random() * randomChars.length));\n  }\n  return result;\n}"]},"metadata":{},"sourceType":"module"}