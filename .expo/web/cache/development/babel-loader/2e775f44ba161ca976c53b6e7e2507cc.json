{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { auth } from \"../firebase\";\nimport { collection, query, where, onSnapshot } from \"firebase/firestore\";\nimport React, { useEffect, useState } from 'react';\nimport { db } from \"../firebase\";\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { MyAdoptedPetCard } from \"../components/MyAdoptedPetCard\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function ViewMyPostScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      petPostDataArray = _useState2[0],\n      setpetPostDataArray = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var getData = function getData() {\n    var _auth$currentUser;\n\n    var q, unsubscribe;\n    return _regeneratorRuntime.async(function getData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            q = query(collection(db, \"PetPost\"), where(\"adopterID\", \"==\", (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid));\n            unsubscribe = onSnapshot(q, function (querySnapshot) {\n              setpetPostDataArray([]);\n              querySnapshot.forEach(function _callee(docSnap) {\n                var newjson;\n                return _regeneratorRuntime.async(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        newjson = {\n                          id: docSnap.id,\n                          imagepath: docSnap.data()['imagepath'],\n                          petname: docSnap.data()['petname'],\n                          petgender: docSnap.data()['petgender'],\n                          petstages: docSnap.data()['petstages'],\n                          desc: docSnap.data()['desc'],\n                          postcreator: docSnap.data()['postcreator'],\n                          requestUsers: [],\n                          adopterID: docSnap.data()['adopterID']\n                        };\n                        setpetPostDataArray(function (oldArray) {\n                          return [].concat(_toConsumableArray(oldArray), [newjson]);\n                        });\n\n                      case 2:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              });\n            });\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getData();\n    setIsLoading(false);\n  }, []);\n  return _jsx(_Fragment, {\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(View, {\n        style: styles.uppergadient,\n        children: _jsx(LinearGradient, {\n          colors: ['white', 'rgba(255,255,255,0)'],\n          style: {\n            height: 40\n          }\n        })\n      }), _jsx(FlatList, {\n        showsVerticalScrollIndicator: true,\n        showsHorizontalScrollIndicator: false,\n        data: petPostDataArray,\n        renderItem: function renderItem(item) {\n          return MyAdoptedPetCard(item, navigation);\n        },\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        }\n      }), _jsx(View, {\n        style: styles.lowergadient,\n        children: _jsx(LinearGradient, {\n          colors: ['rgba(255,255,255,0)', 'rgba(255,255,255,1)'],\n          style: {\n            height: 40\n          }\n        })\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    paddingBottom: 0,\n    backgroundColor: 'white',\n    height: '100%'\n  },\n  inputContainerStyle: {\n    backgroundColor: 'white',\n    borderColor: '#dddddd',\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderLeftWidth: 1,\n    borderRightWidth: 1,\n    height: 30\n  },\n  containerStyle: {\n    backgroundColor: 'white',\n    borderTopWidth: 0,\n    borderBottomWidth: 0,\n    padding: 0,\n    height: 30\n  },\n  headContainer: {\n    overflow: 'hidden',\n    justifyContent: 'space-between',\n    paddingTop: 15,\n    paddingBottom: 15\n  },\n  SearchBarContainer: {\n    paddingBottom: 15\n  },\n  header: {\n    fontSize: 30,\n    fontWeight: 'bold',\n    color: '#298e96'\n  },\n  headerDesc: {\n    fontSize: 15,\n    color: '#aaaaaa'\n  },\n  recent: {\n    fontWeight: 'bold',\n    fontSize: 20\n  },\n  uppergadient: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    top: 0,\n    width: '100%',\n    height: 40,\n    zIndex: 10\n  },\n  lowergadient: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    position: 'absolute',\n    bottom: 0,\n    width: '100%',\n    height: 40\n  }\n});","map":{"version":3,"sources":["C:/Users/ZZ00UI738/Documents/van fyp/petsaver/screens/ViewMyAdoptedPetScreen.tsx"],"names":["auth","collection","query","where","onSnapshot","React","useEffect","useState","db","LinearGradient","MyAdoptedPetCard","ViewMyPostScreen","navigation","petPostDataArray","setpetPostDataArray","isLoading","setIsLoading","getData","q","currentUser","uid","unsubscribe","querySnapshot","forEach","docSnap","newjson","id","imagepath","data","petname","petgender","petstages","desc","postcreator","requestUsers","adopterID","oldArray","styles","container","uppergadient","height","item","lowergadient","StyleSheet","create","paddingBottom","backgroundColor","inputContainerStyle","borderColor","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","containerStyle","padding","headContainer","overflow","justifyContent","paddingTop","SearchBarContainer","header","fontSize","fontWeight","color","headerDesc","recent","flex","top","width","zIndex","position","bottom"],"mappings":"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","sourcesContent":["import { StyleSheet, FlatList, ActivityIndicator, View } from 'react-native';\nimport { ref, getDownloadURL } from \"firebase/storage\";\nimport { auth } from \"../firebase\";\nimport { collection, query, where, onSnapshot, getDocs, orderBy, limit, doc } from \"firebase/firestore\";\nimport React, { useEffect, useState } from 'react';\nimport { SettingStackParamList, HomeStackProps, petPostDataProps, SettingStackProps } from '../types';\nimport { storage, db } from \"../firebase\";\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { MyAdoptedPetCard } from '../components/MyAdoptedPetCard';\n\nexport default function ViewMyPostScreen({ navigation }: SettingStackProps<'ViewMyAdpotedPet'>) {\n  const [petPostDataArray, setpetPostDataArray] = useState<petPostDataProps[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const getData = async () => {\n    var q = query(collection(db, \"PetPost\"), where(\"adopterID\", \"==\", auth.currentUser?.uid));\n\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\n      setpetPostDataArray([])\n\n      querySnapshot.forEach(async (docSnap) => {\n\n        const newjson = {\n          id: docSnap.id,\n          imagepath: docSnap.data()['imagepath'],\n          petname: docSnap.data()['petname'],\n          petgender: docSnap.data()['petgender'],\n          petstages: docSnap.data()['petstages'],\n          desc: docSnap.data()['desc'],\n          postcreator: docSnap.data()['postcreator'],\n          requestUsers: [],\n          adopterID: docSnap.data()['adopterID'],\n        }\n        //console.log(doc.data()['createdate'], newjson);\n        setpetPostDataArray(oldArray => [...oldArray, newjson]);\n      });\n    });\n\n  }\n\n  useEffect(() => {\n    getData()\n    setIsLoading(false)\n  }, []);\n  return (<>\n    <View style={styles.container}>\n\n      <View style={styles.uppergadient}>\n        <LinearGradient\n          colors={['white', 'rgba(255,255,255,0)']}\n          style={{ height: 40 }}\n        />\n      </View>\n      <FlatList\n        showsVerticalScrollIndicator={true}\n        showsHorizontalScrollIndicator={false}\n        data={petPostDataArray}\n        renderItem={(item) => MyAdoptedPetCard(item, navigation)}\n        keyExtractor={item => item.id}\n      />\n      <View style={styles.lowergadient}>\n        <LinearGradient\n          colors={['rgba(255,255,255,0)', 'rgba(255,255,255,1)']}\n          style={{ height: 40 }}\n        />\n      </View>\n    </View>\n  </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingBottom: 0,\n    backgroundColor: 'white',\n    height: '100%'\n\n  },\n  inputContainerStyle: {\n    backgroundColor: 'white',\n    borderColor: '#dddddd',\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderLeftWidth: 1,\n    borderRightWidth: 1,\n    height: 30\n  },\n  containerStyle: {\n    backgroundColor: 'white',\n    borderTopWidth: 0,\n    borderBottomWidth: 0,\n    padding: 0,\n    height: 30\n\n  },\n  headContainer: {\n    overflow: 'hidden',\n    justifyContent: 'space-between',\n    paddingTop: 15,\n    paddingBottom: 15\n  },\n  SearchBarContainer: {\n    paddingBottom: 15\n  },\n  header: {\n    fontSize: 30,\n    fontWeight: 'bold',\n    color: '#298e96'\n  },\n  headerDesc: {\n    fontSize: 15,\n    color: '#aaaaaa'\n  },\n  recent: {\n    fontWeight: 'bold',\n    fontSize: 20\n  },\n  uppergadient: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    top: 0,\n    width: '100%',\n    height: 40,\n    zIndex: 10\n  },\n  lowergadient: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    position: 'absolute',\n    bottom: 0,\n    width: '100%',\n    height: 40\n  }\n});\n"]},"metadata":{},"sourceType":"module"}