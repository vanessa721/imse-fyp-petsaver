{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { collection, doc, onSnapshot, query, where } from \"firebase/firestore\";\nimport { default as React, useEffect, useState } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Text } from 'react-native-elements';\nimport { AdoptedPetCard } from \"../components/AdoptedPetCard\";\nimport { auth, db } from \"../firebase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function MyFavScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      petPostDataArray = _useState2[0],\n      setpetPostDataArray = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var getData = function getData() {\n    var _auth$currentUser;\n\n    var userId, unsub;\n    return _regeneratorRuntime.async(function getData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            userId = (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid;\n\n            if (userId) {\n              unsub = onSnapshot(doc(db, \"Users\", userId), function (doc) {\n                var _doc$data;\n\n                if (doc == undefined) return false;\n                if (!doc.data()) return false;\n                var temp_id_list = new Array();\n                setpetPostDataArray([]);\n\n                if ((_doc$data = doc.data()) != null && _doc$data.favorites) {\n                  var _doc$data2;\n\n                  var q = query(collection(db, \"PetPost\"), where('__name__', \"in\", (_doc$data2 = doc.data()) == null ? void 0 : _doc$data2.favorites));\n                  var unsubscribe = onSnapshot(q, function (querySnapshot) {\n                    querySnapshot.forEach(function (doc) {\n                      var newjson = {\n                        id: doc.id,\n                        imagepath: doc.data()['imagepath'],\n                        petname: doc.data()['petname'],\n                        petgender: doc.data()['petgender'],\n                        petstages: doc.data()['petstages'],\n                        desc: doc.data()['desc'],\n                        postcreator: doc.data()['postcreator'],\n                        petType: doc.data()['petType'],\n                        requestUsers: []\n                      };\n\n                      if (!temp_id_list.includes(doc.id)) {\n                        temp_id_list.push(doc.id);\n                        setpetPostDataArray(function (oldArray) {\n                          return [].concat(_toConsumableArray(oldArray), [newjson]);\n                        });\n                      }\n                    });\n                  });\n                }\n\n                var q = query(collection(db, \"PetPost\"), where('adopterID', \"==\", userId));\n                var unsubscribe2 = onSnapshot(q, function (querySnapshot) {\n                  querySnapshot.forEach(function (doc) {\n                    var newjson = {\n                      id: doc.id,\n                      imagepath: doc.data()['imagepath'],\n                      petname: doc.data()['petname'],\n                      petgender: doc.data()['petgender'],\n                      petstages: doc.data()['petstages'],\n                      desc: doc.data()['desc'],\n                      postcreator: doc.data()['postcreator'],\n                      petType: doc.data()['petType'],\n                      requestUsers: []\n                    };\n\n                    if (!temp_id_list.includes(doc.id)) {\n                      temp_id_list.push(doc.id);\n                      setpetPostDataArray(function (oldArray) {\n                        return [].concat(_toConsumableArray(oldArray), [newjson]);\n                      });\n                    }\n                  });\n                });\n                var q = query(collection(db, \"PetPost\"), where('postcreator', \"==\", userId));\n                var unsubscribe3 = onSnapshot(q, function (querySnapshot) {\n                  querySnapshot.forEach(function (doc) {\n                    var newjson = {\n                      id: doc.id,\n                      imagepath: doc.data()['imagepath'],\n                      petname: doc.data()['petname'],\n                      petgender: doc.data()['petgender'],\n                      petstages: doc.data()['petstages'],\n                      desc: doc.data()['desc'],\n                      postcreator: doc.data()['postcreator'],\n                      petType: doc.data()['petType'],\n                      requestUsers: []\n                    };\n\n                    if (!temp_id_list.includes(doc.id)) {\n                      temp_id_list.push(doc.id);\n                      setpetPostDataArray(function (oldArray) {\n                        return [].concat(_toConsumableArray(oldArray), [newjson]);\n                      });\n                    }\n                  });\n                });\n              });\n            }\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getData();\n    setIsLoading(false);\n  }, []);\n  return _jsxs(_Fragment, {\n    children: [_jsx(Text, {\n      style: styles.header,\n      children: \"My Favourite\"\n    }), _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(View, {\n        style: styles.uppergadient,\n        children: _jsx(LinearGradient, {\n          colors: ['white', 'rgba(255,255,255,0)'],\n          style: {\n            height: 40\n          }\n        })\n      }), _jsx(FlatList, {\n        showsVerticalScrollIndicator: true,\n        showsHorizontalScrollIndicator: false,\n        data: petPostDataArray,\n        renderItem: function renderItem(item) {\n          return AdoptedPetCard(item, navigation);\n        },\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        }\n      }), _jsx(View, {\n        style: styles.lowergadient,\n        children: _jsx(LinearGradient, {\n          colors: ['rgba(255,255,255,0)', 'rgba(255,255,255,1)'],\n          style: {\n            height: 40\n          }\n        })\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  header: {\n    fontSize: 30,\n    fontWeight: 'bold',\n    color: '#298e96',\n    backgroundColor: 'white',\n    padding: 20,\n    paddingTop: 40,\n    paddingBottom: 0\n  },\n  container: {\n    flex: 1,\n    padding: 20,\n    paddingBottom: 0,\n    backgroundColor: 'white',\n    justifyContent: 'flex-start'\n  },\n  uppergadient: {\n    flex: 1,\n    top: 20,\n    width: '100%',\n    height: 40,\n    zIndex: 10,\n    position: 'absolute'\n  },\n  lowergadient: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    position: 'absolute',\n    bottom: 0,\n    width: '100%',\n    height: 40\n  }\n});\n\nfunction checkInPetPostDataArray(array, newid) {\n  for (var i = 0; i < array.length; i++) {\n    console.log(\"array[i].id: \", array[i].id, \", newid: \", newid);\n\n    if (array[i].id === newid) {\n      return true;\n    }\n  }\n\n  return false;\n}","map":{"version":3,"sources":["C:/Users/ZZ00UI738/Documents/van fyp/petsaver/screens/MyFavScreen.tsx"],"names":["LinearGradient","collection","doc","onSnapshot","query","where","default","React","useEffect","useState","Text","AdoptedPetCard","auth","db","MyFavScreen","navigation","petPostDataArray","setpetPostDataArray","isLoading","setIsLoading","getData","userId","currentUser","uid","unsub","undefined","data","temp_id_list","Array","favorites","q","unsubscribe","querySnapshot","forEach","newjson","id","imagepath","petname","petgender","petstages","desc","postcreator","petType","requestUsers","includes","push","oldArray","unsubscribe2","unsubscribe3","styles","header","container","uppergadient","height","item","lowergadient","StyleSheet","create","fontSize","fontWeight","color","backgroundColor","padding","paddingTop","paddingBottom","flex","justifyContent","top","width","zIndex","position","bottom","checkInPetPostDataArray","array","newid","i","length","console","log"],"mappings":"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","sourcesContent":["import { LinearGradient } from 'expo-linear-gradient';\nimport { collection, doc, onSnapshot, query, where } from \"firebase/firestore\";\nimport { default as React, useEffect, useState } from 'react';\nimport { FlatList, StyleSheet, View } from 'react-native';\nimport { Text } from 'react-native-elements';\nimport { AdoptedPetCard } from '../components/AdoptedPetCard';\nimport { auth, db } from \"../firebase\";\nimport { MyFavStackProps, petPostDataProps } from '../types';\n\n\nexport default function MyFavScreen({ navigation }: MyFavStackProps<'MyFav'>) {\n  const [petPostDataArray, setpetPostDataArray] = useState<any>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const getData = async () => {\n    var userId = auth.currentUser?.uid;\n    if (userId) {\n      const unsub = onSnapshot(doc(db, \"Users\", userId), (doc) => {\n        if (doc == undefined) return false;\n        if (!doc.data()) return false;\n\n        const temp_id_list = new Array()\n        setpetPostDataArray([]);\n\n        if (doc.data()?.favorites) {\n          var q = query(collection(db, \"PetPost\"), where('__name__', \"in\", doc.data()?.favorites));\n          const unsubscribe = onSnapshot(q, (querySnapshot) => {\n            querySnapshot.forEach((doc) => {\n              const newjson = {\n                id: doc.id,\n                imagepath: doc.data()['imagepath'],\n                petname: doc.data()['petname'],\n                petgender: doc.data()['petgender'],\n                petstages: doc.data()['petstages'],\n                desc: doc.data()['desc'],\n                postcreator: doc.data()['postcreator'],\n                petType: doc.data()['petType'],\n                requestUsers: [],\n              }\n              if (!temp_id_list.includes(doc.id)) {\n                temp_id_list.push(doc.id)\n                setpetPostDataArray((oldArray: any) => [...oldArray, newjson]);\n              }\n            });\n          });\n        }\n        var q = query(collection(db, \"PetPost\"), where('adopterID', \"==\", userId));\n        const unsubscribe2 = onSnapshot(q, (querySnapshot) => {\n          querySnapshot.forEach((doc) => {\n            const newjson = {\n              id: doc.id,\n              imagepath: doc.data()['imagepath'],\n              petname: doc.data()['petname'],\n              petgender: doc.data()['petgender'],\n              petstages: doc.data()['petstages'],\n              desc: doc.data()['desc'],\n              postcreator: doc.data()['postcreator'],\n              petType: doc.data()['petType'],\n              requestUsers: [],\n            }\n            if (!temp_id_list.includes(doc.id)) {\n              temp_id_list.push(doc.id);\n              setpetPostDataArray((oldArray: any) => [...oldArray, newjson]);\n            }\n          });\n        });\n        var q = query(collection(db, \"PetPost\"), where('postcreator', \"==\", userId));\n        const unsubscribe3 = onSnapshot(q, (querySnapshot) => {\n          querySnapshot.forEach((doc) => {\n            const newjson = {\n              id: doc.id,\n              imagepath: doc.data()['imagepath'],\n              petname: doc.data()['petname'],\n              petgender: doc.data()['petgender'],\n              petstages: doc.data()['petstages'],\n              desc: doc.data()['desc'],\n              postcreator: doc.data()['postcreator'],\n              petType: doc.data()['petType'],\n              requestUsers: [],\n            }\n            if (!temp_id_list.includes(doc.id)) {\n              temp_id_list.push(doc.id);\n              setpetPostDataArray((oldArray: any) => [...oldArray, newjson]);\n            }\n          });\n        });\n      });\n    }\n  }\n\n  useEffect(() => {\n    getData()\n    setIsLoading(false)\n  }, []);\n  return (<>\n    <Text style={styles.header}>My Favourite</Text>\n    <View style={styles.container}>\n\n      <View style={styles.uppergadient}>\n        <LinearGradient\n          colors={['white', 'rgba(255,255,255,0)']}\n          style={{ height: 40 }}\n        />\n      </View>\n      <FlatList\n        showsVerticalScrollIndicator={true}\n        showsHorizontalScrollIndicator={false}\n        data={petPostDataArray}\n        renderItem={(item) => AdoptedPetCard(item, navigation)}\n        keyExtractor={item => item.id}\n      />\n      <View style={styles.lowergadient}>\n        <LinearGradient\n          colors={['rgba(255,255,255,0)', 'rgba(255,255,255,1)']}\n          style={{ height: 40 }}\n        />\n      </View>\n    </View>\n  </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  header: {\n    fontSize: 30,\n    fontWeight: 'bold',\n    color: '#298e96',\n    backgroundColor: 'white',\n    padding: 20,\n    paddingTop: 40,\n    paddingBottom: 0,\n  },\n  container: {\n    flex: 1,\n    padding: 20,\n    paddingBottom: 0,\n    backgroundColor: 'white',\n    justifyContent: 'flex-start'\n  },\n  uppergadient: {\n    flex: 1,\n    //backgroundColor: 'white',\n    top: 20,\n    width: '100%',\n    height: 40,\n    zIndex: 10,\n    position: 'absolute'\n  },\n  lowergadient: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    position: 'absolute',\n    bottom: 0,\n    width: '100%',\n    height: 40\n  }\n});\n\nfunction checkInPetPostDataArray(array: any, newid: string) {\n  for (var i = 0; i < array.length; i++) {\n    console.log(\"array[i].id: \", array[i].id, \", newid: \", newid)\n    if (array[i].id === newid) {\n      return true;\n    }\n  }\n  return false;\n\n}"]},"metadata":{},"sourceType":"module"}