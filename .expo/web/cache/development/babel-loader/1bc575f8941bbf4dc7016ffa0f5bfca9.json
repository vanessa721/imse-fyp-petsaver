{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Button, Text, Input } from 'react-native-elements';\nimport { storage, db } from \"../firebase\";\nimport React, { useEffect, useState } from 'react';\nimport { ref, getDownloadURL } from \"firebase/storage\";\nimport { collection, query, getDocs } from \"firebase/firestore\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function CreatePostScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      imageUrl = _useState2[0],\n      setImageUrl = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      petPostDataArray = _useState4[0],\n      setpetPostDataArray = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      image = _useState6[0],\n      setImage = _useState6[1];\n\n  var getData = function getData() {\n    var querySnapshot;\n    return _regeneratorRuntime.async(function getData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(getDocs(collection(db, \"PetPost\")));\n\n          case 2:\n            querySnapshot = _context.sent;\n            querySnapshot.forEach(function (doc) {\n              getDownloadURL(ref(storage, doc.data()['imagepath'])).then(function (url) {\n                var newjson = {\n                  id: doc.id,\n                  imagepath: url,\n                  petname: doc.data()['petname'],\n                  petgender: doc.data()['petgender'],\n                  petstages: doc.data()['petstages'],\n                  desc: doc.data()['desc']\n                };\n                setpetPostDataArray(function (oldArray) {\n                  return [].concat(_toConsumableArray(oldArray), [newjson]);\n                });\n              }).catch(function (error) {});\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var pickImage = function pickImage() {\n    var result;\n    return _regeneratorRuntime.async(function pickImage$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context2.sent;\n            console.log(result);\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n            }\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getData();\n  }, []);\n  var q = query(collection(db, \"PetPost\"));\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"CreatePostScreen\"\n    }), _jsx(View, {\n      style: styles.separator\n    }), _jsx(Input, {\n      style: styles.input,\n      placeholder: \"Email\"\n    }), _jsxs(View, {\n      style: {\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: [_jsx(Button, {\n        title: \"Pick an image from camera roll\",\n        onPress: pickImage\n      }), image && _jsx(Image, {\n        source: {\n          uri: image\n        },\n        style: {\n          width: 200,\n          height: 200\n        }\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold'\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%'\n  },\n  input: {\n    fontSize: 12\n  },\n  CardContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    alignItems: 'flex-start',\n    borderRadius: 25,\n    padding: 10,\n    borderWidth: 1,\n    borderColor: '#dddddd',\n    marginVertical: 15\n  },\n  imageitem: {\n    aspectRatio: 0.95,\n    width: 100,\n    borderRadius: 25\n  }\n});","map":{"version":3,"sources":["C:/Users/ZZ00UI738/Documents/van fyp/petsaver/screens/CreatePostScreen.tsx"],"names":["Button","Text","Input","storage","db","React","useEffect","useState","ref","getDownloadURL","collection","query","getDocs","ImagePicker","CreatePostScreen","navigation","imageUrl","setImageUrl","petPostDataArray","setpetPostDataArray","image","setImage","getData","querySnapshot","forEach","doc","data","then","url","newjson","id","imagepath","petname","petgender","petstages","desc","oldArray","catch","error","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","console","log","cancelled","uri","q","styles","container","title","separator","input","flex","alignItems","justifyContent","width","height","StyleSheet","create","fontSize","fontWeight","marginVertical","CardContainer","flexDirection","flexWrap","borderRadius","padding","borderWidth","borderColor","imageitem","aspectRatio"],"mappings":"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","sourcesContent":["import { StyleSheet, View, Image } from 'react-native';\nimport { auth } from \"../firebase\";\nimport EditScreenInfo from '../components/EditScreenInfo';\nimport { SettingStackProps, petPostDataProps } from '../types';\nimport { Button, ButtonGroup, withTheme, Text, Input } from 'react-native-elements';\nimport { storage, db } from \"../firebase\";\nimport React, { useEffect, useState } from 'react';\nimport { ref, getDownloadURL } from \"firebase/storage\";\nimport { collection, query, where, onSnapshot, getDocs } from \"firebase/firestore\";\nimport * as ImagePicker from 'expo-image-picker';\n\n\nexport default function CreatePostScreen({ navigation }: SettingStackProps<'Setting'>) {\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [petPostDataArray, setpetPostDataArray] = useState<petPostDataProps[]>([]);\n  const [image, setImage] = useState(\"\");\n\n\n  const getData = async () => {\n    const querySnapshot = await getDocs(collection(db, \"PetPost\"));\n    querySnapshot.forEach((doc) => {\n      getDownloadURL(ref(storage, doc.data()['imagepath']))\n        .then((url) => {\n          const newjson = {\n            id: doc.id,\n            imagepath: url,\n            petname: doc.data()['petname'],\n            petgender: doc.data()['petgender'],\n            petstages: doc.data()['petstages'],\n            desc: doc.data()['desc']\n          }\n          setpetPostDataArray(oldArray => [...oldArray, newjson]);\n\n        })\n        .catch((error) => {\n          // Handle any errors\n        });\n\n    });\n  }\n\n  const pickImage = async () => {\n    // No permissions request is necessary for launching the image library\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n    });\n\n    console.log(result);\n\n    if (!result.cancelled) {\n      setImage(result.uri);\n    }\n  };\n\n  useEffect(() => {\n    getData()\n  }, []);\n\n\n\n  const q = query(collection(db, \"PetPost\"));\n\n\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>CreatePostScreen</Text>\n      <View style={styles.separator} />\n      <Input style={styles.input} placeholder='Email' />\n      <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n        <Button title=\"Pick an image from camera roll\" onPress={pickImage} />\n        {image && <Image source={{ uri: image }} style={{ width: 200, height: 200 }} />}\n      </View>\n    </View>\n\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  input: {\n    fontSize: 12\n  },\n  CardContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    alignItems: 'flex-start', // if you want to fill rows left to right\n    borderRadius: 25,\n    padding: 10,\n    borderWidth: 1,\n    borderColor: '#dddddd',\n    marginVertical: 15,\n  },\n  imageitem: {\n    aspectRatio: 0.95,\n    width: 100,\n    borderRadius: 25,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}