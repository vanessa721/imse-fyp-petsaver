{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Button, Text, Avatar } from 'react-native-elements';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { db, auth } from \"../firebase\";\nimport { onSnapshot, doc, setDoc } from \"firebase/firestore\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function PostDetailScreen(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var petItem = route.params.petItem;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      ownerName = _useState2[0],\n      setOwnerName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      ownerImagepath = _useState4[0],\n      setOwnerImage = _useState4[1];\n\n  var getOwnerDetail = function getOwnerDetail() {\n    var unsub;\n    return _regeneratorRuntime.async(function getOwnerDetail$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (petItem.postcreator) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", false);\n\n          case 2:\n            unsub = onSnapshot(doc(db, \"Users\", petItem.postcreator), function (doc) {\n              var _doc$data, _doc$data2;\n\n              if (doc == undefined) return false;\n              if (!doc.data()) return false;\n              setOwnerName((_doc$data = doc.data()) == null ? void 0 : _doc$data.username);\n              setOwnerImage((_doc$data2 = doc.data()) == null ? void 0 : _doc$data2.userIconUri);\n            });\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var sendContactRequest = function sendContactRequest() {\n    var _auth$currentUser;\n\n    var userId, postRef, requestRef, unsub;\n    return _regeneratorRuntime.async(function sendContactRequest$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            userId = (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid;\n\n            if (!(petItem.postcreator == userId)) {\n              _context2.next = 4;\n              break;\n            }\n\n            Alert.alert(\"Request Failed\", \"You cannot adopt your own pet\", [{\n              text: \"OK\",\n              onPress: function onPress() {\n                return console.log(\"OK Pressed\");\n              }\n            }]);\n            return _context2.abrupt(\"return\", false);\n\n          case 4:\n            _context2.prev = 4;\n\n            if (userId) {\n              _context2.next = 8;\n              break;\n            }\n\n            console.error(\"userId not found:  \", auth.currentUser);\n            return _context2.abrupt(\"return\", false);\n\n          case 8:\n            postRef = doc(db, \"PetPost\", petItem.id);\n            requestRef = doc(postRef, \"contactRequest\", userId);\n            _context2.next = 12;\n            return _regeneratorRuntime.awrap(setDoc(requestRef, {\n              status: 'New request',\n              requestTime: new Date()\n            }, {\n              merge: true\n            }));\n\n          case 12:\n            unsub = _context2.sent;\n            console.log(\"Document written with ID: \", petItem.id);\n            Alert.alert(\"Request Sent\", \"Please wait for pet owner to contact you through email\", [{\n              text: \"OK\",\n              onPress: function onPress() {\n                return console.log(\"OK Pressed\");\n              }\n            }]);\n            _context2.next = 20;\n            break;\n\n          case 17:\n            _context2.prev = 17;\n            _context2.t0 = _context2[\"catch\"](4);\n            console.error(\"Error adding document:  \", _context2.t0);\n\n          case 20:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[4, 17]], Promise);\n  };\n\n  useEffect(function () {\n    var _navigation$getParent;\n\n    getOwnerDetail();\n    (_navigation$getParent = navigation.getParent()) == null ? void 0 : _navigation$getParent.setOptions({\n      tabBarStyle: {\n        display: \"none\"\n      }\n    });\n    return function () {\n      var _navigation$getParent2;\n\n      return (_navigation$getParent2 = navigation.getParent()) == null ? void 0 : _navigation$getParent2.setOptions({\n        tabBarStyle: {\n          borderTopWidth: 0,\n          backgroundColor: 'white',\n          elevation: 0,\n          height: '8%'\n        }\n      });\n    };\n  }, [navigation]);\n  return _jsx(_Fragment, {\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(View, {\n        style: styles.iconContainer,\n        children: _jsx(FontAwesome, {\n          name: \"arrow-left\",\n          size: 25,\n          color: \"white\",\n          onPress: function onPress() {\n            navigation.navigate('Home');\n          }\n        })\n      }), _jsx(View, {\n        style: styles.iconContainer2,\n        children: _jsx(FontAwesome, {\n          name: \"heart-o\",\n          size: 25,\n          color: \"white\"\n        })\n      }), petItem.imagepath != \"\" && _jsx(Image, {\n        style: styles.imageitem,\n        source: {\n          uri: petItem.imagepath\n        }\n      }), _jsxs(View, {\n        style: styles.contentContainer,\n        children: [_jsx(Text, {\n          style: styles.petname,\n          children: petItem.petname\n        }), _jsxs(Text, {\n          style: styles.petgender,\n          children: [petItem.petgender, \"  -  \", petItem.petstages, \" \"]\n        }), _jsxs(ScrollView, {\n          showsVerticalScrollIndicator: false,\n          showsHorizontalScrollIndicator: false,\n          style: {\n            paddingBottom: 70\n          },\n          children: [_jsx(Text, {\n            style: {\n              fontSize: 16,\n              marginTop: 12,\n              fontWeight: 'bold'\n            },\n            children: \"Pet Story\"\n          }), _jsxs(Text, {\n            style: styles.paragraph,\n            children: [petItem.desc, \" \"]\n          }), _jsxs(View, {\n            style: {\n              marginTop: 5\n            },\n            children: [_jsxs(Text, {\n              style: styles.paragraphTitle,\n              children: [\"Sterilisation: \", petItem.sterilisation]\n            }), _jsxs(Text, {\n              style: styles.paragraphTitle,\n              children: [\"Vaccinated: \", petItem.vaccinated]\n            })]\n          }), _jsx(Text, {\n            style: {\n              fontSize: 14,\n              marginTop: 12,\n              fontWeight: 'bold'\n            },\n            children: \"Adoption Requirement\"\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"hvAddressProve: \", petItem.hvAddressProve]\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"hvIncomeProve: \", petItem.hvIncomeProve]\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"totalIncome: \", petItem.totalIncome]\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"apartmentType: \", petItem.apartmentType]\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"apartmentSize: \", petItem.apartmentSize]\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"hvExperience: \", petItem.hvExperience]\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"hvWindowScreen: \", petItem.hvWindowScreen]\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"numOfOtherPet: \", petItem.numOfOtherPet]\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"otherPetDescription: \", petItem.otherPetDescription]\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"hvSmoker: \", petItem.hvSmoker]\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"hvRespiratoryDiseases: \", petItem.hvRespiratoryDiseases]\n          }), _jsxs(Text, {\n            style: styles.paragraphTitle,\n            children: [\"hvAllergySymptoms: \", petItem.hvAllergySymptoms, \"         \"]\n          })]\n        })]\n      }), _jsxs(View, {\n        style: styles.footerContainer,\n        children: [_jsxs(View, {\n          style: styles.ownerContainer,\n          children: [_jsx(Avatar, {\n            size: 50,\n            rounded: true,\n            source: {\n              uri: ownerImagepath\n            }\n          }), _jsxs(View, {\n            style: styles.ownerDetailContainer,\n            children: [_jsx(Text, {\n              style: {\n                fontWeight: 'bold',\n                fontSize: 12\n              },\n              children: ownerName\n            }), _jsx(Text, {\n              style: {\n                fontSize: 10,\n                color: '#aaaaaa'\n              },\n              children: \"owner\"\n            })]\n          })]\n        }), _jsx(Button, {\n          buttonStyle: styles.contactbutton,\n          containerStyle: styles.contactbuttonContainer,\n          titleStyle: {\n            fontWeight: 'bold',\n            fontSize: 11\n          },\n          title: \"Send Adopt Request\",\n          onPress: function onPress() {\n            sendContactRequest();\n          }\n        })]\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'flex-start',\n    justifyContent: 'flex-start',\n    backgroundColor: 'white',\n    height: \"100%\"\n  },\n  iconContainer: {\n    marginTop: 40,\n    padding: 20,\n    alignSelf: 'flex-start',\n    zIndex: 1,\n    position: 'absolute'\n  },\n  iconContainer2: {\n    marginTop: 40,\n    padding: 20,\n    alignSelf: 'flex-end',\n    zIndex: 1,\n    position: 'absolute'\n  },\n  imageitem: {\n    zIndex: 0,\n    aspectRatio: 1.1,\n    width: '100%'\n  },\n  contentContainer: {\n    width: '100%',\n    height: '100%',\n    padding: 30,\n    flex: 1,\n    borderRadius: 25,\n    backgroundColor: 'white',\n    top: -30\n  },\n  petname: {\n    fontWeight: 'bold',\n    fontSize: 30\n  },\n  petgender: {\n    fontSize: 10,\n    marginBottom: 12,\n    fontWeight: 'bold',\n    color: '#888888'\n  },\n  paragraph: {\n    fontSize: 10,\n    color: '#999999'\n  },\n  paragraphTitle: {\n    fontSize: 10,\n    color: '#999999',\n    fontWeight: 'bold'\n  },\n  contactbutton: {\n    backgroundColor: '#0b9298',\n    borderRadius: 5,\n    paddingHorizontal: 15,\n    marginRight: 30\n  },\n  contactbuttonContainer: {\n    marginHorizontal: 30\n  },\n  footerContainer: {\n    position: 'absolute',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    bottom: 0,\n    width: '100%',\n    height: '10%'\n  },\n  ownerContainer: {\n    marginLeft: 30,\n    flexDirection: 'row',\n    justifyContent: 'flex-start'\n  },\n  ownerDetailContainer: {\n    marginLeft: 10,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'flex-start'\n  }\n});","map":{"version":3,"sources":["C:/Users/ZZ00UI738/Documents/van fyp/petsaver/screens/PostDetailScreen.tsx"],"names":["React","useEffect","useState","Button","Text","Avatar","FontAwesome","db","auth","onSnapshot","doc","setDoc","PostDetailScreen","route","navigation","petItem","params","ownerName","setOwnerName","ownerImagepath","setOwnerImage","getOwnerDetail","postcreator","unsub","undefined","data","username","userIconUri","sendContactRequest","userId","currentUser","uid","Alert","alert","text","onPress","console","log","error","postRef","id","requestRef","status","requestTime","Date","merge","getParent","setOptions","tabBarStyle","display","borderTopWidth","backgroundColor","elevation","height","styles","container","iconContainer","navigate","iconContainer2","imagepath","imageitem","uri","contentContainer","petname","petgender","petstages","paddingBottom","fontSize","marginTop","fontWeight","paragraph","desc","paragraphTitle","sterilisation","vaccinated","hvAddressProve","hvIncomeProve","totalIncome","apartmentType","apartmentSize","hvExperience","hvWindowScreen","numOfOtherPet","otherPetDescription","hvSmoker","hvRespiratoryDiseases","hvAllergySymptoms","footerContainer","ownerContainer","ownerDetailContainer","color","contactbutton","contactbuttonContainer","StyleSheet","create","flex","alignItems","justifyContent","padding","alignSelf","zIndex","position","aspectRatio","width","borderRadius","top","marginBottom","paddingHorizontal","marginRight","marginHorizontal","flexDirection","bottom","marginLeft"],"mappings":"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","sourcesContent":["\nimport React, { useEffect, useState, useContext } from 'react';\nimport { StyleSheet, View, Image, Alert, ScrollView } from 'react-native';\nimport { Button, ButtonGroup, withTheme, Text, Input, Divider, Avatar } from 'react-native-elements';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as FileSystem from 'expo-file-system';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { storage, db, auth } from \"../firebase\";\nimport { ref as storage_ref, getDownloadURL, uploadBytes } from \"firebase/storage\";\nimport { collection, query, where, onSnapshot, getDocs, addDoc, doc, setDoc } from \"firebase/firestore\";\n\nimport { SettingStackProps, petPostDataProps } from '../types';\nimport Dropdown from '../components/dropdown'\n\nexport default function PostDetailScreen({ route, navigation }: { route: any, navigation: any }) {\n  const { petItem } = route.params;\n  const [ownerName, setOwnerName] = useState<string | undefined>('');\n  const [ownerImagepath, setOwnerImage] = useState(\"\");\n\n  const getOwnerDetail = async () => {\n    if (!petItem.postcreator) return false;\n\n    const unsub = onSnapshot(doc(db, \"Users\", petItem.postcreator), (doc) => {\n      if (doc == undefined) return false;\n      if (!doc.data()) return false;\n      setOwnerName(doc.data()?.username)\n      setOwnerImage(doc.data()?.userIconUri)\n    });\n  }\n\n  const sendContactRequest = async () => {\n    var userId = auth.currentUser?.uid;\n\n    if (petItem.postcreator == userId) {\n      Alert.alert(\n        \"Request Failed\", \"You cannot adopt your own pet\",\n        [\n          { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\n        ]\n      );\n      return false;\n    }\n\n    try {\n      if (!userId) {\n        console.error(\"userId not found:  \", auth.currentUser);\n        return false;\n      }\n\n      var postRef = doc(db, \"PetPost\", petItem.id);\n      var requestRef = doc(postRef, \"contactRequest\", userId);\n\n      const unsub = await setDoc(requestRef, {\n        status: 'New request',\n        requestTime: new Date(),\n      }, { merge: true });\n\n      console.log(\"Document written with ID: \", petItem.id);\n      Alert.alert(\n        \"Request Sent\", \"Please wait for pet owner to contact you through email\",\n        [\n          { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\n        ]\n      );\n    } catch (e) {\n      console.error(\"Error adding document:  \", e);\n    }\n\n  }\n\n\n  useEffect(() => {\n    getOwnerDetail();\n    navigation.getParent()?.setOptions({ tabBarStyle: { display: \"none\" } });\n    return () => navigation.getParent()?.setOptions(\n      { tabBarStyle: { borderTopWidth: 0, backgroundColor: 'white', elevation: 0, height: '8%' } });\n  }, [navigation]);\n\n  return (\n    <>\n      <View style={styles.container}>\n        <View style={styles.iconContainer}>\n          <FontAwesome\n            name=\"arrow-left\"\n            size={25}\n            color=\"white\"\n            onPress={() => { navigation.navigate('Home') }}\n          />\n        </View>\n        <View style={styles.iconContainer2}>\n          <FontAwesome\n            name=\"heart-o\"\n            size={25}\n            color=\"white\"\n          />\n        </View>\n        {petItem.imagepath != \"\" && <Image style={styles.imageitem}\n          source={{ uri: petItem.imagepath }}\n        />}\n        <View style={styles.contentContainer}>\n          <Text style={styles.petname}>{petItem.petname}</Text>\n          <Text style={styles.petgender}>{petItem.petgender}  -  {petItem.petstages} </Text>\n          <ScrollView showsVerticalScrollIndicator={false}\n            showsHorizontalScrollIndicator={false}\n            style={{ paddingBottom: 70 }}>\n\n            <Text style={{ fontSize: 16, marginTop: 12, fontWeight: 'bold', }}>Pet Story</Text>\n            <Text style={styles.paragraph}>{petItem.desc} </Text>\n            <View style={{ marginTop: 5 }}>\n              <Text style={styles.paragraphTitle}>Sterilisation: {petItem.sterilisation}</Text>\n              <Text style={styles.paragraphTitle}>Vaccinated: {petItem.vaccinated}</Text>\n            </View>\n            <Text style={{ fontSize: 14, marginTop: 12, fontWeight: 'bold' }}>Adoption Requirement</Text>\n            <Text style={styles.paragraphTitle}>hvAddressProve: {petItem.hvAddressProve}</Text>\n            <Text style={styles.paragraphTitle}>hvIncomeProve: {petItem.hvIncomeProve}</Text>\n            <Text style={styles.paragraphTitle}>totalIncome: {petItem.totalIncome}</Text>\n            <Text style={styles.paragraphTitle}>apartmentType: {petItem.apartmentType}</Text>\n            <Text style={styles.paragraphTitle}>apartmentSize: {petItem.apartmentSize}</Text>\n            <Text style={styles.paragraphTitle}>hvExperience: {petItem.hvExperience}</Text>\n            <Text style={styles.paragraphTitle}>hvWindowScreen: {petItem.hvWindowScreen}</Text>\n            <Text style={styles.paragraphTitle}>numOfOtherPet: {petItem.numOfOtherPet}</Text>\n            <Text style={styles.paragraphTitle}>otherPetDescription: {petItem.otherPetDescription}</Text>\n            <Text style={styles.paragraphTitle}>hvSmoker: {petItem.hvSmoker}</Text>\n            <Text style={styles.paragraphTitle}>hvRespiratoryDiseases: {petItem.hvRespiratoryDiseases}</Text>\n            <Text style={styles.paragraphTitle}>hvAllergySymptoms: {petItem.hvAllergySymptoms}         </Text>\n          </ScrollView>\n\n\n\n\n        </View>\n\n        <View style={styles.footerContainer}>\n          <View style={styles.ownerContainer}>\n            <Avatar\n              size={50}\n              rounded\n              source={{ uri: ownerImagepath }}\n            />\n            <View style={styles.ownerDetailContainer}>\n              <Text style={{ fontWeight: 'bold', fontSize: 12 }}>{ownerName}</Text>\n              <Text style={{ fontSize: 10, color: '#aaaaaa' }}>owner</Text>\n            </View>\n          </View>\n          <Button buttonStyle={styles.contactbutton}\n            containerStyle={styles.contactbuttonContainer}\n            titleStyle={{ fontWeight: 'bold', fontSize: 11 }}\n            title=\"Send Adopt Request\"\n            onPress={() => {\n              sendContactRequest()\n            }}\n          >\n          </Button>\n        </View>\n      </View >\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'flex-start',\n    justifyContent: 'flex-start',\n    backgroundColor: 'white',\n    height: \"100%\"\n  },\n  iconContainer: {\n    marginTop: 40,\n    padding: 20,\n    alignSelf: 'flex-start',\n    zIndex: 1,\n    position: 'absolute'\n  },\n  iconContainer2: {\n    marginTop: 40,\n    padding: 20,\n    alignSelf: 'flex-end',\n    zIndex: 1,\n    position: 'absolute'\n  },\n  imageitem: {\n    zIndex: 0,\n    aspectRatio: 1.1,\n    width: '100%',\n  },\n  contentContainer: {\n    width: '100%',\n    height: '100%',\n    padding: 30,\n\n    flex: 1,\n    borderRadius: 25,\n    backgroundColor: 'white',\n    top: -30\n  },\n  petname: {\n    fontWeight: 'bold',\n    fontSize: 30\n  },\n  petgender: {\n    fontSize: 10, marginBottom: 12, fontWeight: 'bold', color: '#888888'\n  },\n  paragraph: {\n    fontSize: 10, color: '#999999'\n  },\n  paragraphTitle: {\n    fontSize: 10, color: '#999999', fontWeight: 'bold'\n  },\n  contactbutton: {\n    backgroundColor: '#0b9298',\n    borderRadius: 5,\n    paddingHorizontal: 15,\n    marginRight: 30\n  },\n  contactbuttonContainer: {\n    marginHorizontal: 30\n  },\n  footerContainer: {\n    position: 'absolute',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    bottom: 0,\n    width: '100%',\n    height: '10%',\n  },\n  ownerContainer: {\n    marginLeft: 30,\n    flexDirection: 'row',\n    justifyContent: 'flex-start',\n  },\n  ownerDetailContainer: {\n    marginLeft: 10,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'flex-start'\n  },\n\n\n});\n\n"]},"metadata":{},"sourceType":"module"}